{% extends "layout.html" %}
{% block content %}

<h1 class="heading">Bar Chart</h1>

<form id="form" method="post" action="{{ url_for('bars') }}">
    <h4>Chart Selectors</h4>
    <p><span>X-axis:</span><span class="right-selector"><select name="col_1">
        {% for op in options %}
            {% if op == selector_1 %}
            <option selected="selected">{{ op }}</option>
            {% else %}
            <option>{{ op }}</option>
        {% endif %}
        {% endfor %}
    </select><span class="notes">Pandas DataFrame</span></span></p>
    <p><span>Y-axis:</span><span class="right-selector"><select name="col_2">
        {% for op in options %}
            {% if op == selector_2 %}
            <option selected="selected">{{ op }}</option>
            {% else %}
            <option>{{ op }}</option>
        {% endif %}
        {% endfor %}
    </select><span class="notes">Pandas DataFrame</span></span></p>
    <p><span>Hearing Type:</span><span class="right-selector"><select name="case_type">
        {% for op in ['Initial Hearings', 'Appellate Hearings', 'All Hearings'] %}
            {% if op == case_type %}
                <option selected="selected">{{ op }}</option>
            {% else %}
                <option>{{ op }}</option>
            {% endif %}
        {% endfor %}
    </select><span class="notes">SQL Query Filter</span></span></p>

    <p><span>Bar Type:</span><span class="right-selector"><select name="bar_type">
        {% for op in ['Stacked', 'Grouped'] %}
            {% if op == bar_type %}
                <option selected="selected">{{ op }}</option>
            {% else %}
                <option>{{ op }}</option>
            {% endif %}
        {% endfor %}
    </select><span class="notes">Plotly Parameter</span></span></p>

    <button type="submit" id="submit" name="submit">Generate Bar Chart From Database</button>
    <br class="clear"/>
</form>

<div id= "chart"></div>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script type="text/javascript">
  var graphs = {{ graph_json | safe }};
  Plotly.plot('chart', graphs, {});
</script>

<blockquote>
    <p>The stacked bar chart (aka stacked bar graph) extends the standard bar
    chart from looking at numeric values across one categorical variable
    to two. Each bar in a standard bar chart is divided into a number of
    sub-bars stacked end to end, each one corresponding to a level of the
    second categorical variable.</p>
    <cite><a href="https://chartio.com/learn/charts/stacked-bar-chart-complete-guide/">
            A Complete Guide to Stacked Bar Charts</a></cite>
</blockquote>

{% endblock %}
